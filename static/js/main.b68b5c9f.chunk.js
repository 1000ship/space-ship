(this["webpackJsonpspace-ship"]=this["webpackJsonpspace-ship"]||[]).push([[0],{40:function(n,t,e){n.exports=e.p+"static/media/wannavile.2bb886d9.jpg"},41:function(n,t,e){n.exports=e.p+"static/media/ghost.e01411fa.png"},46:function(n,t,e){n.exports=e(86)},83:function(n,t){},86:function(n,t,e){"use strict";e.r(t);var i=e(0),o=e.n(i),r=e(39),a=e.n(r),c=e(12),s=e(20),u=e(1),f=e(2),l=e(40),m=e.n(l),d=e(41),h=e.n(d);function p(){var n=Object(u.a)(["\n  color: white;\n  font-size: 1.5em;\n"]);return p=function(){return n},n}function v(){var n=Object(u.a)(["\n  width: 150px;\n  height: 150px;\n  background-image: url(",");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n"]);return v=function(){return n},n}function b(){var n=Object(u.a)(["\n  position: absolute;\n  left: ","px;\n  top: ","px;\n  transition left 1s, top 1s;\n  \n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transform: translate(-50%, -90%);\n  animation-iteration-count: infinite;\n  animation-duration: 1s;\n  animation-name: ghost-animation;\n\n  @keyframes ghost-animation {\n    0% {\n      transform: translate(-50%, -90%);\n    }\n    50% {\n      transform: translate(-50%, -95%);\n    }\n    100% {\n      transform: translate(-50%, -90%);\n    }\n  }\n"]);return b=function(){return n},n}var g=f.a.div(b(),(function(n){return n.x}),(function(n){return n.y})),k=f.a.div(v(),(function(n){return n.srcImage})),x=f.a.span(p()),y=function(n){var t=n.username,e=void 0===t?"no-name":t,i=n.x,r=n.y;return o.a.createElement(g,{x:i,y:r},o.a.createElement(k,{srcImage:h.a}),o.a.createElement(x,null,e))};function w(){var n=Object(u.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 1500px;\n"]);return w=function(){return n},n}function j(){var n=Object(u.a)(["\n  width: 100vw;\n  height: 100vh;\n"]);return j=function(){return n},n}var L=f.a.div(j()),O=f.a.img(w()),E=function(n){var t=n.moveTo,e=n.myUser,i=n.userList;return o.a.createElement(L,null,o.a.createElement(O,{src:m.a,onClick:function(n){t(n.pageX,n.pageY)}}),i.map((function(n){return o.a.createElement(y,{key:n.id,x:n.x,y:n.y,username:n.name})})),o.a.createElement(y,{key:e.id,x:e.x,y:e.y,username:e.name}))},U=e(21);var C=function(n,t){var e=this;this.id=n,this.name=t,this.x=0,this.y=0,this.setPosition=function(n,t){return e.x=n,e.y=t,e},this.clone=function(){return Object(c.a)({},e)}},I=e(45),M=e.n(I);function z(n,t,e){var i=this,o=e.onConnect,r=e.onUserListChange,a=e.onUserMove,c=e.userName;this.socket=M()("http://".concat(n,":").concat(t)),this.id="",this.userList=[],this.userName="",this.socket.on("connect",(function(){console.log("ID",i.socket.id),i.socket.binary(!0).emit("e",i.socket.id,c),i.id=i.socket.id,o(i.id)})),this.socket.on("e",(function(n,t){i.userList.push({id:n,name:t}),r&&r(i.userList)})),this.socket.on("x",(function(n){var t=i.userList.findIndex((function(t){return t.id===n}));-1!==t&&(i.userList.splice(t,1),r&&r(i.userList))})),this.socket.on("l",(function(n){i.userList=n,r&&r(i.userList,!0)})),this.socket.on("m",(function(n,t,e){a&&a(n,t,e)}))}var N,P,S=function(n){B.id=n},T=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=Object(U.a)(J).filter((function(t){return-1!==n.findIndex((function(n){return n.id===t.id}))}));n.forEach((function(n){var i=n.id,o=n.name,r=n.x,a=void 0===r?0:r,c=n.y,s=void 0===c?0:c;if(-1===e.findIndex((function(n){return n.id===i}))&&i!==P.id){var u=new C(i,o);t&&u.setPosition(a,s),e.push(u)}})),W(J=e)},A=function(n,t,e){if(B.id===n)return B=B.setPosition(t,e),void D(B);var i=J.findIndex((function(t){return t.id===n})),o=Object(U.a)(J);if(-1===i)return o;o[i].x=t,o[i].y=e,W(J=o)},B=new C("",""),J=[],W=null,D=null,X={emit:function(n){for(var t,e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];P&&(t=P.binary(!0)).emit.apply(t,[n].concat(i))},setUserListCallback:function(n){W=n},setUserMeCallback:function(n){D=n},setUsername:function(n){B.name=n},connect:function(){N=new z("ec2-3-137-150-69.us-east-2.compute.amazonaws.com",4e3,{onConnect:S,onUserListChange:T,onUserMove:A,userName:B.name}),P=N.socket}};var Y=function(){var n=Object(i.useState)(new C("","")),t=Object(s.a)(n,2),e=t[0],r=t[1],a=Object(i.useState)([]),u=Object(s.a)(a,2),f=u[0],l=u[1];Object(i.useEffect)((function(){X.setUsername(prompt("\ub2f9\uc2e0\uc758 \uc774\ub984\uc740?","\ubc14\ubcf4")),X.setUserListCallback((function(n){l(n)})),X.setUserMeCallback((function(n){r(Object(c.a)({},n))})),X.connect()}),[]);var m=function(n,t){var e=null;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];null===e&&(e=setTimeout((function(){n.apply(void 0,o),e=null}),t))}}((function(n,t){X.emit("m",n,t)}),100);return o.a.createElement(E,{moveTo:m,myUser:e,userList:f})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.b68b5c9f.chunk.js.map