(this["webpackJsonpspace-ship"]=this["webpackJsonpspace-ship"]||[]).push([[0],{40:function(n,t,e){n.exports=e.p+"static/media/wannavile.2bb886d9.jpg"},41:function(n,t,e){n.exports=e.p+"static/media/ghost.e01411fa.png"},46:function(n,t,e){n.exports=e.p+"static/media/ghost.7b4562b0.mp3"},47:function(n,t,e){n.exports=e(87)},84:function(n,t){},87:function(n,t,e){"use strict";e.r(t);var i=e(0),o=e.n(i),a=e(39),r=e.n(a),c=e(13),s=e(5),u=e(21),l=e(1),f=e(2),m=e(40),d=e.n(m),p=e(41),h=e.n(p);function v(){var n=Object(l.a)(["\n  color: black;\n  background-color: white;\n  border-radius: 10px;\n  padding: 5px 10px;\n  max-width: 100%;\n"]);return v=function(){return n},n}function g(){var n=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 50%;\n  font-size: 1.5em;\n  transform: translate(-50%, -110%);\n"]);return g=function(){return n},n}function b(){var n=Object(l.a)(["\n  color: white;\n  font-size: 1.5em;\n  white-space: nowrap;\n"]);return b=function(){return n},n}function k(){var n=Object(l.a)(["\n  width: 150px;\n  height: 150px;\n  object-fit: contain;\n  object-position: center;\n"]);return k=function(){return n},n}function x(){var n=Object(l.a)(["\n  position: absolute;\n  left: ","px;\n  top: ","px;\n  transition left 1s, top 1s;\n  \n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transform: translate(-50%, -90%);\n  animation-iteration-count: infinite;\n  animation-duration: 1s;\n  animation-name: ghost-animation;\n\n  @keyframes ghost-animation {\n    0% {\n      transform: translate(-50%, -90%);\n    }\n    50% {\n      transform: translate(-50%, -95%);\n    }\n    100% {\n      transform: translate(-50%, -90%);\n    }\n  }\n"]);return x=function(){return n},n}var w=f.a.div(x(),(function(n){return n.x}),(function(n){return n.y})),y=f.a.img(k()),j=f.a.span(b()),O=f.a.div(g()),E=f.a.div(v()),L=function(n){var t=n.name,e=n.x,i=n.y,a=n.message;return o.a.createElement(w,{x:e,y:i},o.a.createElement(y,{src:h.a}),o.a.createElement(j,null,t),a&&o.a.createElement(O,null,o.a.createElement(E,null,a)))};function U(){var n=Object(l.a)(["\n  padding: 20px;\n  font-size: 1.5em;\n"]);return U=function(){return n},n}function T(){var n=Object(l.a)(["\n  position: fixed;\n  right: 10px;\n  top: 10px;\n"]);return T=function(){return n},n}var C=f.a.div(T()),I=f.a.button(U()),M=function(n){var t=n.talk;return o.a.createElement(C,null,o.a.createElement(I,{onClick:function(n){var e=prompt("\ud560 \ub9d0\uc740?");e&&t(e)}},"\ub300\ud654\ud558\uae30"))};function P(){var n=Object(l.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 1500px;\n"]);return P=function(){return n},n}function z(){var n=Object(l.a)(["\n  width: 100vw;\n  height: 100vh;\n"]);return z=function(){return n},n}var A=f.a.div(z()),N=f.a.img(P()),S=function(n){var t=n.moveTo,e=n.myUser,i=n.userList,a=n.talk;return o.a.createElement(A,null,o.a.createElement(N,{src:d.a,onClick:function(n){t(n.pageX,n.pageY)}}),i.map((function(n){return o.a.createElement(L,Object.assign({key:n.id},n))})),o.a.createElement(L,Object.assign({key:e.id},e)),o.a.createElement(M,{talk:a}))};var B=function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.id=t,this.name=e,this.x=0,this.y=0,this.message=null,this.messageTimeout=null,this.setPosition=function(t,e){return n.x=t,n.y=e,n},this.clone=function(){return Object(c.a)({},n)},this.talk=function(t,e){n.message=t,n.messageTimeout&&clearTimeout(n.messageTimeout),n.messageTimeout=setTimeout((function(){n.message=null,e()}),3e3)}},J=e(45),W=e.n(J);function D(n,t,e){var i=this,o=e.onConnect,a=e.onUserListChange,r=e.onUserMove,c=e.onUserTalk,s=e.userName;this.socket=W()("http://".concat(n,":").concat(t)),this.id="",this.userList=[],this.userName="",this.socket.on("connect",(function(){console.log("ID",i.socket.id),i.socket.binary(!0).emit("e",i.socket.id,s),i.id=i.socket.id,o(i.id)})),this.socket.on("e",(function(n,t){i.userList.push({id:n,name:t}),a&&a(i.userList)})),this.socket.on("x",(function(n){var t=i.userList.findIndex((function(t){return t.id===n}));-1!==t&&(i.userList.splice(t,1),a&&a(i.userList))})),this.socket.on("l",(function(n){i.userList=n,a&&a(i.userList,!0)})),this.socket.on("m",(function(n,t,e){r&&r(n,t,e)})),this.socket.on("t",(function(n,t){c&&c(n,t)}))}var X,Y,$=function(n){H.id=n},q=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=Object(s.a)(K).filter((function(t){return-1!==n.findIndex((function(n){return n.id===t.id}))}));n.forEach((function(n){var i=n.id,o=n.name,a=n.x,r=void 0===a?0:a,c=n.y,s=void 0===c?0:c;if(-1===e.findIndex((function(n){return n.id===i}))&&i!==Y.id){var u=new B(i,o);t&&u.setPosition(r,s),e.push(u)}})),Q(K=e)},F=function(n,t,e){if(H.id===n)return H.setPosition(t,e),void R(H);var i=K.findIndex((function(t){return t.id===n})),o=Object(s.a)(K);if(-1===i)return o;o[i].x=t,o[i].y=e,Q(K=o)},G=function(n,t){if(H.id===n)return H.talk(t,(function(){return R(H)})),void R(H);var e=K.findIndex((function(t){return t.id===n}));-1!==e&&(K[e].talk(t,(function(){return Q(K)})),Q(K))},H=new B,K=[],Q=null,R=null,V={emit:function(n){for(var t,e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];Y&&(t=Y.binary(!0)).emit.apply(t,[n].concat(i))},setUserListCallback:function(n){Q=n},setUserMeCallback:function(n){R=n},setUsername:function(n){H.name=n},connect:function(){X=new D("ec2-3-137-150-69.us-east-2.compute.amazonaws.com",4e3,{onConnect:$,onUserListChange:q,onUserMove:F,onUserTalk:G,userName:H.name}),Y=X.socket}},Z=e(46),_=e.n(Z),nn=null,tn={isPlaying:function(){return null!==nn},play:function(){try{nn&&nn.pause()}catch(n){}(nn=new Audio).loop=!0,nn.src=_.a,nn.play()},pause:function(){nn&&nn.pause()}};var en=function(){var n=Object(i.useState)(new B("","")),t=Object(u.a)(n,2),e=t[0],a=t[1],r=Object(i.useState)([]),l=Object(u.a)(r,2),f=l[0],m=l[1];Object(i.useEffect)((function(){V.setUsername(prompt("\ub2f9\uc2e0\uc758 \uc774\ub984\uc740?",function(){var n=["\ub611\ub611\ud55c","\uace0\uc694\ud55c","\uace0\uc6b4","\uae30\ud2b9\ud55c","\uae5c\ucc0d\ud55c","\uadfc\uba74\ud55c","\uadc0\uc5ec\uc6b4","\uad00\ub300\ud55c","\uae54\ub054\ud55c","\uae0d\uc815\uc801\uc778","\uacb8\uc190\ud55c"],t=["\uba4b\uc7c1\uc774","\uc13c\uc2a4\uc7c1\uc774","\uac1c\uad6c\uc7c1\uc774","\uac81\uc7c1\uc774","\uc218\ub2e4\uc7c1\uc774","\uc18c\uae08\uc7c1\uc774"];return"".concat(n[parseInt(n.length*Math.random())]," ").concat(t[parseInt(t.length*Math.random())])}())),V.setUserListCallback((function(n){m(Object(s.a)(n))})),V.setUserMeCallback((function(n){a(Object(c.a)({},n))})),V.connect(),window.addEventListener("click",(function(){tn.isPlaying()||tn.play()}))}),[]);var d=function(n,t){var e=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];null===e&&(e=setTimeout((function(){n.apply(void 0,o),e=null}),t))}}((function(n,t){V.emit("m",n,t)}),100);return o.a.createElement(S,{moveTo:d,talk:function(n){V.emit("t",n)},myUser:e,userList:f})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(en,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.7c07117f.chunk.js.map